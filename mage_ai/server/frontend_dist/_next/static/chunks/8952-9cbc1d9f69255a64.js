"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8952],{44162:function(n,e,t){t.d(e,{HC:function(){return k},Kf:function(){return s},Nk:function(){return f},PY:function(){return v},gE:function(){return b},jv:function(){return h},nz:function(){return p},oh:function(){return u},qn:function(){return a},t1:function(){return m},y9:function(){return g}});var o=t(85617),i=t(23831),r=t(86422),c=t(73942),l=t(49125),d=t(90880),u=68;function a(n,e){var t,o,c=((null===e||void 0===e||null===(t=e.theme)||void 0===t?void 0:t.borders)||i.Z.borders).light,l=((null===e||void 0===e||null===(o=e.theme)||void 0===o?void 0:o.monotone)||i.Z.monotone).grey500,d=e||{},u=d.blockColor,a=d.isSelected,s=d.theme;return a?c=(s||i.Z).content.active:r.tf.TRANSFORMER===n||u===r.Lq.PURPLE?(c=(s||i.Z).accent.purple,l=(s||i.Z).accent.purpleLight):r.tf.DATA_EXPORTER===n||u===r.Lq.YELLOW?(c=(s||i.Z).accent.yellow,l=(s||i.Z).accent.yellowLight):r.tf.DATA_LOADER===n||u===r.Lq.BLUE?(c=(s||i.Z).accent.blue,l=(s||i.Z).accent.blueLight):r.tf.MARKDOWN===n?(c=(s||i.Z).accent.sky,l=(s||i.Z).accent.skyLight):r.tf.SENSOR===n||u===r.Lq.PINK?(c=(s||i.Z).accent.pink,l=(s||i.Z).accent.pinkLight):r.tf.DBT===n?(c=(s||i.Z).accent.dbt,l=(s||i.Z).accent.dbtLight):r.tf.EXTENSION===n||u===r.Lq.TEAL?(c=((null===s||void 0===s?void 0:s.accent)||i.Z.accent).teal,l=((null===s||void 0===s?void 0:s.accent)||i.Z.accent).tealLight):r.tf.CALLBACK===n?(c=((null===s||void 0===s?void 0:s.accent)||i.Z.accent).rose,l=((null===s||void 0===s?void 0:s.accent)||i.Z.accent).roseLight):r.tf.CONDITIONAL===n||r.tf.SCRATCHPAD===n||u===r.Lq.GREY||r.tf.CUSTOM===n&&!u?(c=(s||i.Z).content.default,l=(s||i.Z).accent.contentDefaultTransparent):r.tf.GLOBAL_DATA_PRODUCT!==n||u||(c=(s||i.Z).monotone.white,l=(s||i.Z).monotone.whiteTransparent),{accent:c,accentLight:l}}var s=(0,o.css)([""," "," "," "," "," "," ",""],(0,d.eR)(),(function(n){return!n.selected&&!n.hasError&&"\n    border-color: ".concat(a(n.blockType,n).accentLight,";\n  ")}),(function(n){return n.selected&&!n.hasError&&"\n    border-color: ".concat(a(n.blockType,n).accent,";\n  ")}),(function(n){return!n.selected&&n.hasError&&"\n    border-color: ".concat((n.theme.accent||i.Z.accent).negativeTransparent,";\n  ")}),(function(n){return n.selected&&n.hasError&&"\n    border-color: ".concat((n.theme.borders||i.Z.borders).danger,";\n  ")}),(function(n){return n.dynamicBlock&&"\n    border-style: dashed !important;\n  "}),(function(n){return n.dynamicChildBlock&&"\n    border-style: dotted !important;\n  "})),f=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-s5rj34-0"})(["border-radius:","px;position:relative;"],c.n_),v=o.default.div.withConfig({displayName:"indexstyle__HiddenBlockContainerStyle",componentId:"sc-s5rj34-1"})([""," border-radius:","px;border-style:",";border-width:","px;",""],s,c.n_,c.M8,c.mP,(function(n){return"\n    background-color: ".concat((n.theme||i.Z).background.content,";\n\n    &:hover {\n      border-color: ").concat(a(n.blockType,n).accent,";\n    }\n  ")})),p=o.default.div.withConfig({displayName:"indexstyle__BlockHeaderStyle",componentId:"sc-s5rj34-2"})([""," border-top-left-radius:","px;border-top-right-radius:","px;border-top-style:",";border-top-width:","px;border-left-style:",";border-left-width:","px;border-right-style:",";border-right-width:","px;padding:","px;position:sticky;top:-5px;"," "," ",""],s,c.n_,c.n_,c.M8,c.mP,c.M8,c.mP,c.M8,c.mP,l.iI,(function(n){return"\n    background-color: ".concat((n.theme||i.Z).background.content,";\n  ")}),(function(n){return n.bottomBorder&&"\n    border-bottom: ".concat(c.YF,"px ").concat(c.M8," ").concat((n.theme||i.Z).borders.medium2,";\n  ")}),(function(n){return n.zIndex&&"\n    z-index: ".concat(6+(n.zIndex||0),";\n  ")})),h=o.default.div.withConfig({displayName:"indexstyle__CodeContainerStyle",componentId:"sc-s5rj34-3"})([""," border-left-style:",";border-left-width:","px;border-right-style:",";border-right-width:","px;padding-bottom:","px;padding-top:","px;position:relative;"," "," "," .line-numbers{opacity:0;}&.selected{.line-numbers{opacity:1 !important;}}"],s,c.M8,c.mP,c.M8,c.mP,l.iI,l.iI,(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).codeTextarea,";\n  ")}),(function(n){return n.lightBackground&&"\n    background-color: ".concat((n.theme||i.Z).background.content,";\n  ")}),(function(n){return!n.hasOutput&&"\n    border-bottom-left-radius: ".concat(c.n_,"px;\n    border-bottom-right-radius: ").concat(c.n_,"px;\n    border-bottom-style: ").concat(c.M8,";\n    border-bottom-width: ").concat(c.mP,"px;\n  ")})),b=o.default.div.withConfig({displayName:"indexstyle__BlockDivider",componentId:"sc-s5rj34-4"})(["align-items:center;display:flex;height:","px;justify-content:center;position:relative;z-index:8;bottom:","px;&:hover{"," .block-divider-inner{","}}"],2*l.iI,.5*l.iI,(function(n){return n.additionalZIndex>0&&"\n      z-index: ".concat(8+n.additionalZIndex,";\n    ")}),(function(n){return"\n        background-color: ".concat((n.theme.text||i.Z.text).fileBrowser,";\n      ")})),m=o.default.div.withConfig({displayName:"indexstyle__BlockDividerInner",componentId:"sc-s5rj34-5"})(["height 1px;width:100%;position:absolute;z-index:-1;top:","px;"],1.5*l.iI),g=o.default.div.withConfig({displayName:"indexstyle__CodeHelperStyle",componentId:"sc-s5rj34-6"})(["margin-bottom:","px;padding-bottom:","px;",""],1*l.iI,1*l.iI,(function(n){return"\n    border-bottom: 1px solid ".concat((n.theme.borders||i.Z.borders).medium,";\n    padding-left: ").concat(n.normalPadding?l.iI:u,"px;\n  ")})),k=o.default.div.withConfig({displayName:"indexstyle__TimeTrackerStyle",componentId:"sc-s5rj34-7"})(["bottom:","px;left:","px;position:absolute;"],1*l.iI,u)},35438:function(n,e,t){t.d(e,{Ai:function(){return c},Jo:function(){return r},bJ:function(){return l},rl:function(){return o}});var o,i=t(86422),r=(t(49125).iI,1e4),c={compact:!0},l={height:10,width:10};i.tf.DATA_EXPORTER,i.tf.SENSOR,i.Lq.GREY,i.Lq.PINK,i.Lq.TEAL,i.Lq.YELLOW;!function(n){n.NORTH="NORTH",n.SOUTH="SOUTH"}(o||(o={}))},48952:function(n,e,t){t.d(e,{Z:function(){return yn}});var o=t(75582),i=t(21831),r=t(82394),c=t(26304),l=t(77837),d=t(38860),u=t.n(d),a=t(51774),s=t.n(a),f=t(85617),v=t(82755),p=t(82684),h=t(83455),b=t(18283),m=t(86422),g=t(16634),k=t(93461),x=t(67971),y=t(86673),C=t(54283),Z=t(19711),I=t(23831),O=t(22341),E=t(73942),T=t(49125),_=3*T.iI,w=f.default.div.withConfig({displayName:"indexstyle__NodeStyle",componentId:"sc-kc7274-0"})(["border-radius:","px;border:1px solid transparent;min-width:fit-content;overflow:hidden;"," "," "," "," "," "," "," ",""],E.n_,(function(n){return"\n    background-color: ".concat((n.theme.background||I.Z.background).codeTextarea,";\n  ")}),(function(n){return n.borderColor&&"\n    border-color: ".concat(n.borderColor,";\n  ")}),(function(n){return n.selected&&"\n    border-color: ".concat((n.theme.content||I.Z.content).active,";\n  ")}),(function(n){return(n.isCancelled||n.disabled)&&"\n    // opacity doesn\u2019t work on Safari\n    border-color: ".concat((n.theme.content||I.Z.content).muted,";\n    border-style: dotted;\n    cursor: not-allowed;\n    opacity: 0.5;\n  ")}),(function(n){return n.isConditionFailed&&"\n    background-color: ".concat((n.theme.content||I.Z.content).disabled,";\n    cursor: not-allowed;\n  ")}),(function(n){return n.isConditionFailed&&"\n    background-color: ".concat((n.theme.content||I.Z.content).disabled,";\n    cursor: not-allowed;\n  ")}),(function(n){return n.disabled&&"\n    &:hover {\n      cursor: not-allowed;\n    }\n  "}),(function(n){return n.height&&"\n    height: ".concat(n.height,"px;\n  ")})),j=f.default.div.withConfig({displayName:"indexstyle__StatusStyle",componentId:"sc-kc7274-1"})(["height:","px;width:","px;"],2*T.iI,2*T.iI),A=f.default.div.withConfig({displayName:"indexstyle__IconStyle",componentId:"sc-kc7274-2"})(["align-items:center;border-radius:","px;border:2px solid transparent;display:flex;height:","px;justify-content:center;width:","px;"," ",""],E.BG,5*T.iI,5*T.iI,(function(n){return n.backgroundColor&&"\n    background-color: ".concat(n.backgroundColor,";\n    border-color: ").concat(n.backgroundColor,";\n  ")}),(function(n){return n.borderColor&&"\n    border-color: ".concat(n.borderColor,";\n  ")})),D=f.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-kc7274-3"})(["padding:","px;",""],1*T.iI,(function(n){return"\n    background-color: ".concat((n.theme.background||I.Z.background).dashboard,";\n  ")})),R=f.default.div.withConfig({displayName:"indexstyle__BodyStyle",componentId:"sc-kc7274-4"})(["padding-left:","px;padding-right:","px;"],1*T.iI,1*T.iI),S=(f.default.div.withConfig({displayName:"indexstyle__RuntimeStyle",componentId:"sc-kc7274-5"})(["margin-right:","px;padding:12px 4px;height:100%;width:50px;background:rgba(0,0,0,0.2);background-blend-mode:soft-light;"],2*T.iI),t(98781)),P=t(75968),N=t(25958),L=T.cd,B=T.cd*T.iI,M=2*T.iI,H=7.43,F=2*T.iI+5*T.iI,U=2*T.iI+5*T.iI+B+B+M,q=30*T.iI;function G(n){var e=(0,P.MS)(n);if((null===e||void 0===e?void 0:e.length)>=1)return(null===e||void 0===e?void 0:e.map((function(n){return n.title})).join(", "))||"";if(m.tf.GLOBAL_DATA_PRODUCT===(null===n||void 0===n?void 0:n.type)){var t,o=null===n||void 0===n||null===(t=n.configuration)||void 0===t?void 0:t.global_data_product;if(null!==o&&void 0!==o&&o.uuid)return null===o||void 0===o?void 0:o.uuid}return m.dO[null===n||void 0===n?void 0:n.language]||""}function V(n,e){var t,o=n.type,i=(null===m.V4||void 0===m.V4?void 0:m.V4[o])||o;if(S.qL.INTEGRATION===(null===e||void 0===e?void 0:e.type)&&m.tf.TRANSFORMER!==n.type){var r,c={};if(m.t6.YAML===n.language&&(c=(0,v.Qc)(n.content)),m.tf.DATA_LOADER===n.type)t="".concat(n.uuid,": ").concat(null===(r=c)||void 0===r?void 0:r.source);else if(m.tf.DATA_EXPORTER===n.type){var l;t="".concat(n.uuid,": ").concat(null===(l=c)||void 0===l?void 0:l.destination)}}else if(m.tf.DBT===n.type&&m.t6.SQL===n.language){var d=(0,N.IU)(n),u=d.name,a=d.project;t=u,i="".concat(i,"/").concat(a)}return null!==n&&void 0!==n&&n.replicated_block&&(t=null===n||void 0===n?void 0:n.replicated_block,i=null===n||void 0===n?void 0:n.uuid),t||(t=n.uuid),{displayText:t,subtitle:i}}function z(n,e){return V(n,e).displayText||""}function X(n,e){return V(n,e).subtitle||""}function K(n){var e=0;return null===n||void 0===n||n.forEach((function(n,t){var o=n.uuid;e+=4+o.length*H,t>=1&&(e+=4)})),e}function J(n,e,t){var o,i=0,r=2+F,c=W(n,e,t)-(2+2*T.iI),l=G(n),d=(null===l||void 0===l?void 0:l.length)*H;if(d>=1){var u=1;d>c&&(u=Math.ceil(d/c)),i+=1,r+=18*u}var a=t||{},s=a.blockStatus;return[a.callbackBlocks,a.conditionalBlocks,a.extensionBlocks].forEach((function(n){if((null===n||void 0===n?void 0:n.length)>=1){var e=K(n),t=1;e>c&&(t=Math.ceil(e/c)),i+=1,r+=18.5*t+4*(t-1)}})),"undefined"!==typeof(null===s||void 0===s||null===(o=s[n.uuid])||void 0===o?void 0:o.runtime)&&(r+=18,i+=1),r+=(i+=1)*(1*T.iI)}function W(n,e,t){var o,r,c=Math.max(8.62*(null===(o=z(n,e))||void 0===o?void 0:o.length),(null===(r=X(n,e))||void 0===r?void 0:r.length)*H),l=G(n),d=(null===l||void 0===l?void 0:l.length)*H,u=t||{},a=u.callbackBlocks,s=u.conditionalBlocks,f=u.extensionBlocks,v=Math.max.apply(Math,(0,i.Z)([a,s,f].map((function(n){return K(n)})).concat(d)));return v>c&&(c=Math.min(q,v)),2+U+c}var Q,Y=t(44162),$=t(35438),nn=t(90211),en=function(n){var e=n/1e3,t=4-Math.floor(e).toString().length,o=(0,nn.QV)(e,t>=0?t:0),i="s";return o>1e3&&(o=(0,nn.QV)(o/60,0),i="m"),"".concat(o).concat(i)},tn=function(n,e){var t=n||{},o=t.id,i=t.side,r=null===e||void 0===e?void 0:e.id;return i===$.rl.NORTH?null===o||void 0===o?void 0:o.endsWith("".concat(r,"-to")):i===$.rl.SOUTH&&(null===o||void 0===o?void 0:o.startsWith(r))},on=t(28598),rn=(Q={},(0,r.Z)(Q,m.tf.DATA_EXPORTER,O.zS),(0,r.Z)(Q,m.tf.DATA_LOADER,O.rH),(0,r.Z)(Q,m.tf.DBT,O.xE),(0,r.Z)(Q,m.tf.GLOBAL_DATA_PRODUCT,O.ie),(0,r.Z)(Q,m.tf.SENSOR,O.LM),(0,r.Z)(Q,m.tf.TRANSFORMER,O.Sv),Q);var cn=function(n){var e=n.block,t=n.callbackBlocks,o=n.conditionalBlocks,i=n.disabled,r=n.extensionBlocks,c=n.height,l=n.hideStatus,d=n.pipeline,u=n.selected,a=n.hasFailed,s=n.isCancelled,v=n.isConditionFailed,h=n.isInProgress,E=n.isQueued,T=n.isSuccessful,S=n.runtime,P=(0,p.useContext)(f.ThemeContext),N=!(h||E||a||T||s||v),B=a&&!(h||E),H=!B&&T&&!(h||E),F="";N?F="No status":H?F="Successful execution":B?F="Failed execution":h?F="Currently executiing":s&&(F="Cancelled execution");var U=e.color,q=e.type,V=(0,Y.qn)(q,{blockColor:U,theme:P}).accent,K=(0,p.useMemo)((function(){return G(e)}),[e]),J=(0,p.useMemo)((function(){var n,e,t=rn[q]||O.EJ,o=!1;return[m.tf.CALLBACK,m.tf.CHART,m.tf.CONDITIONAL,m.tf.CUSTOM,m.tf.DATA_EXPORTER,m.tf.DATA_LOADER,m.tf.EXTENSION,m.tf.SCRATCHPAD,m.tf.SENSOR,m.tf.MARKDOWN,m.tf.TRANSFORMER].includes(q)?n=V:[m.tf.DBT].includes(q)&&(e=V),[m.tf.DATA_EXPORTER].includes(q)&&(o=!0),(0,on.jsx)(A,{backgroundColor:n,borderColor:e,children:(0,on.jsx)("div",{style:{height:_,width:_},children:(0,on.jsx)(t,{inverted:o,size:_})})})}),[V,q]);return(0,on.jsxs)(w,{borderColor:V,disabled:i,height:c,isCancelled:s,isConditionFailed:v,selected:u,children:[(0,on.jsx)(D,{children:(0,on.jsxs)(x.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,on.jsxs)(k.Z,{flex:1,children:[J,(0,on.jsx)(y.Z,{mr:L}),(0,on.jsxs)(k.Z,{flexDirection:"column",children:[(0,on.jsx)(Z.ZP,{bold:!0,monospace:!0,children:z(e,d)}),(0,on.jsx)(Z.ZP,{default:!0,monospace:!0,small:!0,children:X(e,d)})]})]}),(0,on.jsx)(y.Z,{mr:"15px"}),(0,on.jsx)(j,{title:F,children:!l&&(0,on.jsxs)(on.Fragment,{children:[h&&(0,on.jsx)(C.Z,{color:(P||I.Z).content.active,small:!0}),H&&(0,on.jsx)(O.Jr,{size:M,success:!0}),B&&(0,on.jsx)(O.x8,{danger:!0,size:M}),N&&(0,on.jsx)(g.Z,{borderSize:1,muted:!0,size:M})]})})]})}),(0,on.jsxs)(R,{children:[(null===K||void 0===K?void 0:K.length)>=1&&(0,on.jsx)(y.Z,{mt:1,children:(0,on.jsx)(Z.ZP,{default:!0,monospace:!0,small:!0,children:K})}),[o,t,r].map((function(n,e){if((null===n||void 0===n?void 0:n.length)>=1)return(0,on.jsx)("div",{style:{marginTop:4},children:(0,on.jsx)(x.ZP,{alignItems:"center",flexWrap:"wrap",children:n.reduce((function(n,e,t){return t>=1&&n.push((0,on.jsx)("div",{style:{width:4}},"space-".concat(e.uuid))),n.push((0,on.jsx)("div",{style:{marginTop:4},children:(0,on.jsx)(b.Z,{color:(0,Y.qn)(e.type,{blockColor:e.color,theme:P}).accentLight,monospace:!0,small:!0,children:e.uuid})},"badge-".concat(e.uuid))),n}),[])})},"badge-blocks-".concat(e))})),S&&(0,on.jsx)(y.Z,{mt:1,children:(0,on.jsx)(Z.ZP,{monospace:!0,muted:!0,small:!0,children:en(S)})})]})]})},ln=t(11135),dn=t(82531),un=t(37391),an=f.default.div.withConfig({displayName:"indexstyle__GraphContainerStyle",componentId:"sc-bc2ei5-0"})(["div{","}",""],un.w5,(function(n){return n.height&&"\n    height: ".concat(n.height,"px;\n  ")})),sn=(f.default.div.withConfig({displayName:"indexstyle__NodeStyle",componentId:"sc-bc2ei5-1"})(["border-radius:","px;border:1px solid transparent;min-width:fit-content;"," "," "," "," "," ",""],E.BG,(function(n){return n.selected&&"\n    border-color: ".concat((n.theme.content||I.Z.content).active,";\n  ")}),(function(n){return n.backgroundColor&&"\n    background-color: ".concat(n.backgroundColor,";\n  ")}),(function(n){return(n.isCancelled||n.disabled)&&"\n    // opacity doesn\u2019t work on Safari\n    border-color: ".concat((n.theme.content||I.Z.content).active,";\n    border-style: dashed;\n    cursor: not-allowed;\n  ")}),(function(n){return n.isConditionFailed&&"\n    background-color: ".concat((n.theme.content||I.Z.content).disabled,";\n    cursor: not-allowed;\n  ")}),(function(n){return n.disabled&&"\n    &:hover {\n      cursor: not-allowed;\n    }\n  "}),(function(n){return n.height&&"\n    height: ".concat(n.height,"px;\n  ")})),f.default.div.withConfig({displayName:"indexstyle__RuntimeStyle",componentId:"sc-bc2ei5-2"})(["margin-right:","px;padding:12px 4px;height:100%;width:50px;background:rgba(0,0,0,0.2);background-blend-mode:soft-light;"],2*T.iI),t(66050)),fn=t(24224);var vn=t(96510),pn=["forwardedRef"];function hn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function bn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?hn(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var mn=s()((0,l.Z)(u().mark((function n(){var e,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(5987),t.e(3330)]).then(t.bind(t,3330));case 2:return e=n.sent,o=e.Canvas,n.abrupt("return",(function(n){var e=n.forwardedRef,t=(0,c.Z)(n,pn);return(0,on.jsx)(o,bn({ref:e},t))}));case 5:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[null]}}}),gn=s()((0,l.Z)(u().mark((function n(){var e;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(5987),t.e(3330)]).then(t.bind(t,3330));case 2:return e=n.sent,n.abrupt("return",e.Node);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[null]}}}),kn=s()((0,l.Z)(u().mark((function n(){var e;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(5987),t.e(3330)]).then(t.bind(t,3330));case 2:return e=n.sent,n.abrupt("return",e.Edge);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[null]}}}),xn=s()((0,l.Z)(u().mark((function n(){var e;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(5987),t.e(3330)]).then(t.bind(t,3330));case 2:return e=n.sent,n.abrupt("return",e.Port);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[null]}}});var yn=function(n){var e=n.blockRefs,t=n.blockStatus,r=n.blocks,c=n.disabled,l=n.editingBlock,d=n.enablePorts,u=void 0!==d&&d,a=n.fetchPipeline,s=n.height,b=n.heightOffset,g=void 0===b?10*T.iI:b,k=n.messages,C=n.noStatus,I=n.onClickNode,O=n.pannable,E=void 0===O||O,_=n.pipeline,w=n.runningBlocks,j=void 0===w?[]:w,A=n.selectedBlock,D=n.setEditingBlock,R=n.setErrors,L=n.setSelectedBlock,B=n.setZoom,M=n.showDynamicBlocks,H=void 0!==M&&M,F=n.treeRef,U=n.zoomable,q=void 0===U||U,G=(0,p.useContext)(f.ThemeContext),V=(0,p.useRef)(null),z=F||V,X=(0,p.useState)([]),K=X[0],Q=X[1],nn=(0,p.useState)(!1),en=nn[0],rn=nn[1],un=(0,p.useState)(null),pn=un[0],hn=un[1],yn=u&&en,Cn=(null===l||void 0===l?void 0:l.upstreamBlocks)||{},Zn=Cn.block,In=Cn.values,On=void 0===In?[]:In,En=(0,p.useMemo)((function(){return On.length}),[On]),Tn=(0,p.useMemo)((function(){var n;return(null===_||void 0===_||null===(n=_.blocks)||void 0===n?void 0:n.filter((function(n){var e=n.type;return!m.iZ.includes(e)})))||[]}),[null===_||void 0===_?void 0:_.blocks]),_n=(0,p.useMemo)((function(){return Tn}),[Tn,H]),wn=(0,p.useMemo)((function(){if(r)return r;if(_){var n={},e=[];return e.push.apply(e,(0,i.Z)(null===_||void 0===_?void 0:_.blocks)),e.push.apply(e,(0,i.Z)(null===_||void 0===_?void 0:_.callbacks)),e.push.apply(e,(0,i.Z)(null===_||void 0===_?void 0:_.conditionals)),Object.values(null===_||void 0===_?void 0:_.extensions).forEach((function(n){var t=n.blocks;e.push.apply(e,(0,i.Z)(t))})),e.reduce((function(e,t){return n[t.uuid]||e.push(t),e}),[])}return[]}),[r,_]),jn=(0,p.useMemo)((function(){return(0,fn.HK)(wn||[],(function(n){return n.uuid}))}),[wn]),An=(0,p.useMemo)((function(){var n={};return null===_n||void 0===_n||_n.map((function(e){var t;n[e.uuid]=null===e||void 0===e||null===(t=e.callback_blocks)||void 0===t?void 0:t.reduce((function(n,e){var t=null===jn||void 0===jn?void 0:jn[e];return t?n.concat(t):n}),[])})),n}),[_n,jn]),Dn=(0,p.useMemo)((function(){var n={};return null===_n||void 0===_n||_n.map((function(e){var t;n[e.uuid]=null===e||void 0===e||null===(t=e.conditional_blocks)||void 0===t?void 0:t.reduce((function(n,e){var t=null===jn||void 0===jn?void 0:jn[e];return t?n.concat(t):n}),[])})),n}),[_n,jn]),Rn=(0,p.useMemo)((function(){var n={};return null===_n||void 0===_n||_n.map((function(e){var t,i=[];null===(t=Object.entries((null===_||void 0===_?void 0:_.extensions)||{}))||void 0===t||t.forEach((function(n){var t=(0,o.Z)(n,2),r=t[0],c=t[1].blocks;null===c||void 0===c||c.forEach((function(n){var t=n.upstream_blocks,o=n.uuid;if(null!==t&&void 0!==t&&t.includes(null===e||void 0===e?void 0:e.uuid)){var c=null===jn||void 0===jn?void 0:jn[o];c&&i.push(bn(bn({},c),{},{extension_uuid:r}))}}))})),n[e.uuid]=i})),n}),[_n,jn,_]),Sn=(0,p.useMemo)((function(){return(0,fn.HK)(j,(function(n){return n.uuid}))}),[j]);(0,p.useEffect)((function(){setTimeout((function(){var n,e,t,o,i;0===(null===z||void 0===z||null===(n=z.current)||void 0===n||null===(e=n.containerRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.scrollTop)&&(null===z||void 0===z||null===(o=z.current)||void 0===o||null===(i=o.fitCanvas)||void 0===i||i.call(o))}),1e3)}),[z]);var Pn=(0,h.Db)(dn.ZP.blocks.pipelines.useUpdate(null===_||void 0===_?void 0:_.uuid,encodeURIComponent(null===Zn||void 0===Zn?void 0:Zn.uuid)),{onSuccess:function(n){return(0,vn.wD)(n,{callback:function(){D({upstreamBlocks:null}),null===a||void 0===a||a()},onErrorCallback:function(n,e){return null===R||void 0===R?void 0:R({errors:e,response:n})}})}}),Nn=(0,o.Z)(Pn,2),Ln=Nn[0],Bn=Nn[1].isLoading,Mn=(0,h.Db)((function(n){var e=n.fromBlock,t=n.portSide,o=n.toBlock,i=n.removeDependency,r=o,c=o.upstream_blocks.concat(e.uuid);return i||t!==$.rl.NORTH||(r=e,c=e.upstream_blocks.concat(o.uuid)),dn.ZP.blocks.pipelines.useUpdate(null===_||void 0===_?void 0:_.uuid,encodeURIComponent(r.uuid))({block:bn(bn({},r),{},{upstream_blocks:i?o.upstream_blocks.filter((function(n){return n!==e.uuid})):c})})}),{onSuccess:function(n){return(0,vn.wD)(n,{callback:function(){null===a||void 0===a||a()},onErrorCallback:function(n,e){return null===R||void 0===R?void 0:R({errors:e,response:n})}})}}),Hn=(0,o.Z)(Mn,1)[0],Fn=(0,p.useCallback)((function(n){var t=n.type,o=n.uuid;if(null===L||void 0===L||L(n),Q([]),null!==e&&void 0!==e&&e.current){var i,r=e.current["".concat(t,"s/").concat(o,".py")];null===r||void 0===r||null===(i=r.current)||void 0===i||i.scrollIntoView()}}),[e,L]),Un=(0,p.useCallback)((function(n){Q([]),D((function(e){var t=e.upstreamBlocks.values||[],o=t.findIndex((function(e){var t=e.uuid;return n.uuid===t}));return bn(bn({},e),{},{upstreamBlocks:bn(bn({},e.upstreamBlocks),{},{values:o>=0?(0,fn.oM)(t,o):t.concat(n)})})}))}),[D]),qn=(0,p.useMemo)((function(){var n={};return _n.forEach((function(e){e.upstream_blocks.forEach((function(t){n[t]||(n[t]=[]),n[t].push(e)}))})),n}),[_n]),Gn=(0,p.useCallback)((function(n){var e,t;if(S.qL.INTEGRATION===(null===_||void 0===_?void 0:_.type)&&m.tf.TRANSFORMER!==n.type){var o,i={};if(m.t6.YAML===n.language&&(i=(0,v.Qc)(n.content)),m.tf.DATA_LOADER===n.type)e="".concat(n.uuid,": ").concat(null===(o=i)||void 0===o?void 0:o.source);else if(m.tf.DATA_EXPORTER===n.type){var r;e="".concat(n.uuid,": ").concat(null===(r=i)||void 0===r?void 0:r.destination)}}else if(m.tf.DBT===n.type&&m.t6.SQL===n.language){var c=(0,N.IU)(n);e=c.name,t=c.project}return null!==n&&void 0!==n&&n.replicated_block&&(e=null===n||void 0===n?void 0:n.replicated_block,t=null===n||void 0===n?void 0:n.uuid),e||(e=n.uuid),{displayText:e,kicker:t,subtitle:undefined}}),[_]),Vn=(0,p.useMemo)((function(){var n=[],e=[];return _n.forEach((function(o){var r=Gn(o),c=r.displayText,l=r.kicker,d=r.subtitle,u=o.tags,a=void 0===u?[]:u,s=o.upstream_blocks,f=void 0===s?[]:s,v=o.uuid,p=qn[v],h=[];p?h.push.apply(h,(0,i.Z)(p.map((function(n){return bn(bn({},$.bJ),{},{id:"".concat(v,"-").concat(n.uuid,"-from"),side:$.rl.SOUTH})})))):h.push(bn(bn({},$.bJ),{},{id:"".concat(v,"-from"),side:$.rl.SOUTH})),0===f.length&&h.push(bn(bn({},$.bJ),{},{id:"".concat(v,"-to"),side:$.rl.NORTH})),null===f||void 0===f||f.forEach((function(n){h.push(bn(bn({},$.bJ),{},{id:"".concat(n,"-").concat(v,"-to"),side:$.rl.NORTH})),e.push({from:n,fromPort:"".concat(n,"-").concat(v,"-from"),id:"".concat(n,"-").concat(v),to:v,toPort:"".concat(n,"-").concat(v,"-to")})}));(null===a||void 0===a?void 0:a.length)>=1&&T.iI,l&&T.iI,d&&T.iI;var b=c;[l,d].forEach((function(n){n&&n.length>b.length&&(b=n)}));var m=null===An||void 0===An?void 0:An[null===o||void 0===o?void 0:o.uuid],g=null===Dn||void 0===Dn?void 0:Dn[null===o||void 0===o?void 0:o.uuid],k=null===Rn||void 0===Rn?void 0:Rn[null===o||void 0===o?void 0:o.uuid];n.push({data:{block:o},height:J(o,_,{blockStatus:t,callbackBlocks:m,conditionalBlocks:g,extensionBlocks:k}),id:v,ports:h,width:W(o,_,{blockStatus:t,callbackBlocks:m,conditionalBlocks:g,extensionBlocks:k})})})),{edges:e,nodes:n}}),[t,_n,An,Dn,Gn,qn,Rn,_]),zn=Vn.edges,Xn=Vn.nodes,Kn=(0,p.useCallback)((function(n){if(C)return{};if(t){var e=t[function(n){var e=n.uuid,t=n.replicated_block;return t?"".concat(e,":").concat(t):e}(n)]||{},o=e.status,i=e.runtime;return{hasFailed:sn.V.FAILED===o,isCancelled:sn.V.CANCELLED===o,isConditionFailed:sn.V.CONDITION_FAILED===o,isInProgress:sn.V.RUNNING===o,isQueued:sn.V.INITIAL===o,isSuccessful:sn.V.COMPLETED===o,runtime:i}}var r,c=(0,P.h5)((null===k||void 0===k?void 0:k[n.uuid])||[]),l=(0,P.oI)(c),d=l.hasError,u=l.hasOutput,a=Sn[n.uuid];return{hasFailed:!a&&(d||m.DA.FAILED===n.status),isInProgress:a,isQueued:a&&(null===(r=j[0])||void 0===r?void 0:r.uuid)!==n.uuid,isSuccessful:!a&&(!d&&u||m.DA.EXECUTED===n.status)}}),[t,k,C,j,Sn]),Jn=(0,p.useMemo)((function(){var n=0;return s&&(n+=s),g&&(n-=g),Math.max(0,n)}),[s,g]);return(0,on.jsxs)(on.Fragment,{children:[Zn&&(0,on.jsxs)(y.Z,{my:3,px:T.cd,children:[(0,on.jsxs)(y.Z,{mb:T.cd,children:[(0,on.jsxs)(Z.ZP,{children:["Select parent block(s) for ",(0,on.jsx)(Z.ZP,{color:(0,Y.qn)(Zn.type,{blockColor:Zn.color,theme:G}).accent,inline:!0,monospace:!0,children:Zn.uuid}),":"]}),(0,on.jsx)(y.Z,{mt:1,children:On.map((function(n,e){var t,o,i=n.uuid;return(0,on.jsxs)(Z.ZP,{color:(0,Y.qn)(null===(t=jn[i])||void 0===t?void 0:t.type,{blockColor:null===(o=jn[i])||void 0===o?void 0:o.type,theme:G}).accent,inline:!0,monospace:!0,children:[i,En>=2&&e<=En-2?(0,on.jsx)(Z.ZP,{inline:!0,children:",\xa0"}):null]},i)}))})]}),(0,on.jsxs)(x.ZP,{alignItems:"center",children:[(0,on.jsx)(ln.ZP,{compact:!0,inline:!0,loading:Bn,onClick:function(){return Ln({block:bn(bn({},Zn),{},{upstream_blocks:On.map((function(n){return n.uuid}))})})},uuid:"DependencyGraph/save_parents",children:"Save dependencies"}),(0,on.jsx)(y.Z,{ml:1}),(0,on.jsx)(ln.ZP,{compact:!0,inline:!0,noBackground:!0,onClick:function(){Q([]),D({upstreamBlocks:null})},uuid:"DependencyGraph/cancel_save_parents",children:"Cancel"})]})]}),(0,on.jsx)(an,{height:Jn,onDoubleClick:function(){var n,e;return null===z||void 0===z||null===(n=z.current)||void 0===n||null===(e=n.fitCanvas)||void 0===e?void 0:e.call(n)},children:(0,on.jsx)(mn,{arrow:null,disabled:c,edge:function(n){var e,t=jn[n.source];return(0,on.jsx)(kn,bn(bn({},n),{},{onClick:function(n,e){hn(null),Q([e.id])},onRemove:function(n,e){var t=jn[e.from],o=jn[e.to];Hn({fromBlock:t,removeDependency:!0,toBlock:o}),Q([])},removable:u&&!(null!==l&&void 0!==l&&l.upstreamBlocks),style:{stroke:null===(e=(0,Y.qn)(null===t||void 0===t?void 0:t.type,{blockColor:null===t||void 0===t?void 0:t.color,theme:G}))||void 0===e?void 0:e.accent}}))},edges:zn,fit:!0,forwardedRef:z,maxHeight:$.Jo,maxWidth:$.Jo,maxZoom:1,minZoom:-.7,node:function(n){var e,t,o,i,r,d;return(0,on.jsx)(gn,bn(bn({},n),{},{dragType:"port",linkable:!0,onClick:function(n,e){var t=e.data.block;hn(null),(null===Zn||void 0===Zn?void 0:Zn.uuid)===t.uuid||(Zn?Un(t):(null===I||void 0===I||I({block:t}),setTimeout((function(){Fn(t)}),1)))},onEnter:function(){null!==l&&void 0!==l&&l.upstreamBlocks||rn(!0)},onLeave:function(){pn||rn(!1)},port:yn&&(null===pn||tn(pn,n))?(0,on.jsx)(xn,{onDrag:function(){return rn(!0)},onDragEnd:function(){rn(!1),hn(null)},onDragStart:function(n,e,t){var o=null===t||void 0===t?void 0:t.side;hn({id:null===t||void 0===t?void 0:t.id,side:o})},onEnter:function(){return rn(!0)},rx:10,ry:10,style:{fill:(0,Y.qn)(null===n||void 0===n||null===(e=n.properties)||void 0===e||null===(t=e.data)||void 0===t||null===(o=t.block)||void 0===o?void 0:o.type,{blockColor:null===n||void 0===n||null===(i=n.properties)||void 0===i||null===(r=i.data)||void 0===r||null===(d=r.block)||void 0===d?void 0:d.color,theme:G}).accent,stroke:"white",strokeWidth:"1px"}}):null,style:{fill:"transparent",stroke:"transparent",strokeWidth:0},children:function(n){var e=n.height,t=n.node.data.block,o=Kn(t),i=Gn(t);i.displayText,i.kicker,i.subtitle;return(0,on.jsx)("foreignObject",{height:e,style:{pointerEvents:"none"},width:n.width,x:0,y:0,children:(0,on.jsx)(cn,bn({block:t,callbackBlocks:null===An||void 0===An?void 0:An[null===t||void 0===t?void 0:t.uuid],conditionalBlocks:null===Dn||void 0===Dn?void 0:Dn[null===t||void 0===t?void 0:t.uuid],disabled:(null===Zn||void 0===Zn?void 0:Zn.uuid)===t.uuid,extensionBlocks:null===Rn||void 0===Rn?void 0:Rn[null===t||void 0===t?void 0:t.uuid],height:e,hideStatus:c||C,pipeline:_,selected:Zn?!!(0,fn.sE)(On,(function(n){return n.uuid===t.uuid})):(null===A||void 0===A?void 0:A.uuid)===t.uuid},o),t.uuid)})}}))},nodes:Xn,onNodeLink:function(n,e,t,o){var i,r=jn[e.id],c=jn[t.id],l=(null===_||void 0===_?void 0:_.type)===S.qL.INTEGRATION&&((null===r||void 0===r?void 0:r.type)===m.tf.DATA_EXPORTER||(null===r||void 0===r?void 0:r.type)===m.tf.DATA_LOADER&&(null===c||void 0===c?void 0:c.type)===m.tf.DATA_EXPORTER);if(!(null!==r&&void 0!==r&&null!==(i=r.upstream_blocks)&&void 0!==i&&i.includes(c.uuid)||e.id===t.id||l)){var d=null===o||void 0===o?void 0:o.side;Hn({fromBlock:r,portSide:d||$.rl.SOUTH,toBlock:c})}},onNodeLinkCheck:function(n,e,t){return!zn.some((function(n){return n.from===e.id&&n.to===t.id}))},onZoomChange:function(n){return null===B||void 0===B?void 0:B(n)},pannable:E,selections:K,zoomable:q})})]})}},66050:function(n,e,t){var o;t.d(e,{V:function(){return o}}),function(n){n.CANCELLED="cancelled",n.COMPLETED="completed",n.FAILED="failed",n.INITIAL="initial",n.RUNNING="running",n.UPSTREAM_FAILED="upstream_failed",n.CONDITION_FAILED="condition_failed"}(o||(o={}))},18283:function(n,e,t){var o=t(82394),i=t(26304),r=(t(82684),t(85617)),c=t(23831),l=t(73942),d=t(2005),u=t(49125),a=t(31012),s=t(28598),f=["children"];function v(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function p(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?v(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var h=r.default.p.withConfig({displayName:"Badge__BadgeStyle",componentId:"sc-tfqsp0-0"})(["border-radius:","px;display:inline;font-family:",";margin:0;white-space:nowrap;",";"," "," ",";",";"," "," "," "," "," "," "," ",""],l.BG,d.ry,a.iD,(function(n){return n.small&&"\n    ".concat(a.HC,";\n  ")}),(function(n){return n.xxsmall&&"\n    font-size: ".concat(a.VK,"px;\n    line-height: ").concat(a.VK,"px;\n  ")}),(function(n){return!n.regular&&"\n    padding: 2px 4px;\n  "}),(function(n){return n.regular&&"\n    padding: ".concat(1*u.iI,"px ").concat(1.25*u.iI,"px;\n  ")}),(function(n){return n.noVerticalPadding&&"\n    padding-bottom: 0;\n    padding-top: 0;\n  "}),(function(n){return!n.disabled&&!n.inverted&&"\n    background-color: ".concat((n.theme||c.Z).background.row,";\n    color: ").concat((n.theme||c.Z).content.default,";\n  ")}),(function(n){return!n.disabled&&n.inverted&&"\n    background-color: ".concat((n.theme||c.Z).background.dark,";\n    color: ").concat((n.theme||c.Z).content.inverted,";\n  ")}),(function(n){return n.cyan&&"\n    background-color: ".concat((n.theme||c.Z).accent.cyan,";\n    color: ").concat((n.theme||c.Z).monotone.black,";\n  ")}),(function(n){return n.disabled&&"\n    background-color: ".concat((n.theme||c.Z).feature.disabled,";\n    color: ").concat((n.theme||c.Z).content.disabled,";\n  ")}),(function(n){return n.color&&"\n    background-color: ".concat(n.color," !important;\n    color: ").concat((n.theme||c.Z).content.active,";\n  ")}),(function(n){return n.quantifier&&"\n    border-radius: 34px;\n    line-height: 10px;\n    padding: 4px 6px;\n  "}),(function(n){return n.monospace&&"\n    font-family: ".concat(d.Vp,";\n    word-break: break-all;\n  ")}));e.Z=function(n){var e=n.children,t=(0,i.Z)(n,f);return(0,s.jsx)(h,p(p({},t),{},{children:e}))}},25958:function(n,e,t){t.d(e,{$1:function(){return r},Dy:function(){return i},IU:function(){return c}});var o=t(17717),i="--full-refresh";function r(n,e){var t,i=null===e||void 0===e?void 0:e.fullPath,r=null===n||void 0===n||null===(t=n.configuration)||void 0===t?void 0:t.file_path;if(i)return null===n||void 0===n?void 0:n.uuid;if(r){var c=r.split(o.sep),l=c[c.length-1].split(".");return l.pop(),l.join(".")}}function c(n){var e,t=null===n||void 0===n||null===(e=n.configuration)||void 0===e?void 0:e.file_path;if(t){var i=t.split(o.sep),r=i[0],c=i[i.length-1].split(".");return c.pop(),{directory:i.slice(1,i.length-1).join(o.sep),filePath:t,name:c.join("."),project:r}}return{filePath:t}}}}]);